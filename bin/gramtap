#!/usr/bin/env node

const { Command } = require('commander');
const program = new Command();

program
  .name('gramtap')
  .description('A developer-friendly CLI for accessing Telegram from the terminal')
  .version('1.0.0');

program
  .command('login')
  .description('Login to Telegram')
  .option('--setup', 'Show step-by-step guide for creating Telegram app and getting API credentials')
  .action((options) => {
    if (options.setup) {
      showTelegramSetupGuide();
    } else {
      console.log('Login functionality coming soon!');
    }
  });

function showTelegramSetupGuide() {
  console.log(`
ğŸš€ Telegram App Setup Guide
============================

Before using Gramtap, you need to create a Telegram app and get your API credentials.
This is a one-time setup process that takes just a few minutes.

ğŸ“‹ What you'll need:
   â€¢ API ID (a number like 123456)
   â€¢ API Hash (a string like 'abc123def456...')

ğŸ” Why do I need these?
   API ID and Hash are unique identifiers that allow your app to communicate
   with Telegram's servers. They're like a username and password for your app.
   Don't worry - they're safe to use and won't give anyone access to your account.

ğŸ“ Step-by-step instructions:

   1. ğŸŒ Go to https://my.telegram.org
      
   2. ğŸ” Log in with your phone number (the same one you use for Telegram)
      
   3. ğŸ“± Enter the verification code sent to your Telegram app
      
   4. ğŸ› ï¸  Click "API Development Tools"
      
   5. ğŸ“‹ Fill out the form to create a new app:
      â€¢ App title: "Gramtap" (or any name you prefer)
      â€¢ Short name: "gramtap" (or any short identifier)
      â€¢ URL: Leave blank (not required)
      â€¢ Platform: Choose "Desktop"
      â€¢ Description: "CLI tool for Telegram" (optional)
      
   6. ğŸ“„ Click "Create application"
      
   7. ğŸ“ Copy your credentials:
      â€¢ API ID: The number shown (like 123456)
      â€¢ API Hash: The long string shown (like 'abc123def456...')

ğŸ” Keep these credentials safe:
   â€¢ Don't share them publicly
   â€¢ Store them securely (Gramtap will help you with this)
   â€¢ You can regenerate them if needed from my.telegram.org

ğŸ“– Official documentation:
   â€¢ Telegram API docs: https://core.telegram.org/api/obtaining_api_id
   â€¢ App registration: https://my.telegram.org

âœ… Next steps:
   Once you have your API ID and Hash, run 'gramtap login' to authenticate
   and start using Gramtap!

Need help? Check the README or open an issue on GitHub.
`);
}

program.parse();